/* Created by smooth00 , https://smooth.blog.csdn.net/ */
/* Do not tamper with the source code */
(function(){var d={};this.tmpl=function t(c,f){c=/\W/.test(c)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):d[c]=d[c]||t(document.getElementById(c).innerHTML);return f?c(f):c}})();
function getPCPairs(d){for(var n=[],c=0;c<d.children.length-1;c+=2){var f=[];f[0]=d.children[c];f[1]=d.children[c+1];n.push(f)}return n}function nodeAsXML(d){d=d.innerHTML;return d="&#13;&#10;"+d.replace(/^\n+|\n+$/g,"")}function VariablesAsXML(d,n){var c="";d=(new XPathEvaluator).evaluate(d,n,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);0<d.snapshotLength&&(c=d.snapshotItem(0).innerHTML,c="&#13;&#10;"+c.replace(/^\n+|\n+$/g,""));return c}
(function(){function d(a,b,l,c){function p(){(function(a){if(""==b.innerHTML)b.innerHTML=a;else{var e=b.getElementsByClassName("nodecontents");if(e&&e[0]){e=e[0];var l=document.createElement("div");l.innerHTML=a;b.replaceChild(l,e)}else b.innerHTML=a}})(function(){var e=function(a,b,e){function g(a,b,e){var g=function(a){switch(a){case "string":return{getValue:function(a){return a.stringValue},type:XPathResult.STRING_TYPE};case "boolean":return{getValue:function(a){return"true"==a.stringValue?!0:
!1},type:XPathResult.STRING_TYPE};case "number":case "time":return{getValue:function(a){return a.numberValue},type:XPathResult.NUMBER_TYPE}}}(b.type||"string");return""==b.path?"":g.getValue(e.evaluate(b.path,a,null,g.type,null))}function l(a){return"function"==typeof this[a]}function c(a,b){var e=a.get;return a.path&&"VariablesAsXML"==e?this[e](a.path,b):this[e](b)}var h={},d;for(d in b){var r=b[d];r.get?l(r.get)&&(h[d]=c(r,a)):r.path&&(h[d]=g(a,r,e))}return h}(a,k.edit.attrs,l),c=v[n];e.vid=b.id;
return c?tmpl(c,e):""}());(function(){var e=b.getElementsByTagName("form");e&&e[0]&&(e[0].model=a)})()}function m(){(function(){function a(a){a=k.edit&&k.edit.attrs?k.edit.attrs[a.name]:void 0;a||(a=k.edit);(a=a.type)||(a="string");return a}function l(a,b){if(b=w[b])a.onfocus=b.onfocus,a.onchange=b.onchange}for(var c=b.getElementsByTagName("input"),h=0;h<c.length;h++){var g=c[h],d=a(g);l(g,d)}c=b.getElementsByTagName("textarea");for(h=0;h<c.length;h++)g=c[h],d=a(g),l(g,d)})();(function(){function a(a){var b=
a.srcElement;b||(b=a.target);l(b.parentElement.parentElement.parentElement.getElementsByClassName("body")[0])}function c(a){var b=a.srcElement;b||(b=a.target);l(b.nextElementSibling.nextElementSibling);b.innerHTML="^"==b.innerHTML.trim()?" > ":" ^ "}function l(a){a.classList.contains("expanded")?(a.classList.remove("expanded"),a.classList.add("collapsed")):(a.classList.remove("collapsed"),a.classList.add("expanded"))}for(var h=b.getElementsByClassName("toggleAttrs"),g=0;g<h.length;g++){var d=h[g];
d.onclick=a}h=b.getElementsByClassName("toggleChildren");for(g=0;g<h.length;g++)d=h[g],d.onclick=c})()}function f(){(function(e){for(var m=a.children.length,k=0;k<m;k++){var h=a.children[k];if(!h.attributes.name||"Argument.metadata"!=h.attributes.name.nodeValue){var g=document.getElementById(b.id+"_child_"+k);g||(g=document.createElement("div"),e.appendChild(g));d(h,g,l,++c)}}})(function(){var c;(c=b.getElementsByClassName(a.nodeName+"_children"))&&c[0]?c=c[0]:(c=document.createElement("div"),c.id=
a.nodeName+"_children",c.setAttribute("class",a.nodeName+"_children"),b.appendChild(c));return c}())}b.id="jmx_"+c;var n=t(a),k=q[n];k&&(p(),m(),(k.edit.processChildren||0!=b.getElementsByClassName(a.nodeName+"_children").length)&&f())}function n(a,b){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var c="jmx"==a.slice(-3)?!0:!1;c?xmlhttp.open("GET",a+"?ran="+Math.random(),!1):xmlhttp.open("GET",a,!1);b?xmlhttp.overrideMimeType("text/plain; charset=x-user-defined"):
c&&xmlhttp.overrideMimeType("text/xml");xmlhttp.send();return xmlhttp}function c(a){var b=a.srcElement;b||(b=a.target);f(b,b.value)}function f(a,b){function c(a,b){b=function(a){if(window.DOMParser){var b=new DOMParser;b=b.parseFromString(a,"text/xml")}else b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a);return b}("<root>"+b.value+"</root>");(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)})(a);(function(a,b){for(b=b.firstChild;b.firstChild;)a.appendChild(b.firstChild)})(a,
b)}var d=a.form.model,p=t(d),m=q[p];p=".";var f=m.edit.attrs[a.name]?a.name:"value";if(f=m.edit.attrs[f]?m.edit.attrs[f]:!1)p=f.path;else if("GENERIC"==m.edit.view)if(m=d.children[0],"collectionProp"==m.nodeName){f=m.children;for(var n=0;n<f.length;n++)for(var k=f[n],e=0;e<k.children.length;e++)k.children[e].attributes.name.value==a.name&&k.attributes.name.value==a.outerHTML.match('/(?<=title=").*?(?=">)/')&&(p=m.nodeName+"/"+k.nodeName+"[@name='"+k.attributes.name.value+"']/"+k.children[e].nodeName+
"[@name='"+a.name+"']")}else p=m.nodeName+"[@name='"+m.attributes.name.value+"']";if(a=(new XPathEvaluator).evaluate(p,d,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null).iterateNext())"object"==typeof b?c(a,b):0<a.childNodes.length?a.childNodes[0].nodeValue=b:2==a.nodeType?a.nodeValue=b:a.appendChild(document.createTextNode(b))}function t(a){return q[a.nodeName]?a.nodeName:a.attributes.guiclass&&q[a.attributes.guiclass.value]?a.attributes.guiclass.value:"DEFAULT"}var u={},q={},v={},w={string:{onchange:c},
"boolean":{onchange:function(a){var b=a.srcElement;b||(b=a.target);f(b,b.checked?"true":"false")}},number:{onchange:c},time:{onchange:c},xml:{onchange:function(a){var b=a.srcElement;b||(b=a.target);f(b,b)}}};this.JMX={init:function(a){(function(a){if(a)u=a;else{a=n("lib/config.json",!0);try{u=JSON.parse(a.responseText)}catch(l){throw l;}}a=n("lib/jmxelements.json",!0);try{q=JSON.parse(a.responseText)}catch(l){throw l;}})(a);(function(){for(var a in q){var c=q[a];a:{var d=void 0,f=void 0,m=a;if(void 0!=
c.edit.view){if(0==c.edit.view)break a;"GENERIC"!=c.edit.view&&"GENDEFAULT"!=c.edit.view?f=c.edit.view:d=c.edit.view}else d=m;f||(f=n("tmpl/"+d+".tmpl",!0).responseText);v[m]=f}}})()},loadAndEdit:function(a,b){b=n(b).responseXML;for(a=document.getElementById(a);a.firstChild;)a.removeChild(a.firstChild);var c=document.createElement("div");a.appendChild(c);d(b.documentElement,c,b,0);return b},save:function(a,b,c){if(0==u.demo)xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),
xmlhttp.open("POST",a+"?fileName="+encodeURIComponent(b),!1),a=localStorage.getItem("token"),xmlhttp.setRequestHeader("token",a),xmlhttp.setRequestHeader("Content-Type","application/json;charset=UTF-8"),xmlhttp.send(c),c=xmlhttp.response,c.match(RegExp(/success/))?alert("\u4fdd\u5b58\u6210\u529f!"):alert(c);else throw"Unable to save due to demo mode being set.";}}})();